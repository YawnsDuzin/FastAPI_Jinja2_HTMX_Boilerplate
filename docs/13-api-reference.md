# API ë ˆí¼ëŸ°ìŠ¤

ì´ ë¬¸ì„œëŠ” FastAPI + HTMX ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ì˜ ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.

## API ê°œìš”

### ê¸°ë³¸ URL

| í™˜ê²½ | URL |
|------|-----|
| ê°œë°œ | `http://localhost:8001` |
| í”„ë¡œë•ì…˜ | `https://your-domain.com` |

### ì¸ì¦ ë°©ì‹

ì´ APIëŠ” **JWT í† í°**ì„ ì‚¬ìš©í•˜ë©°, **httpOnly ì¿ í‚¤**ì— ì €ì¥ë©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ì¸ì¦ íë¦„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. POST /api/v1/auth/login â†’ JWT í† í° ë°œê¸‰ (ì¿ í‚¤ ì €ì¥)     â”‚
â”‚  2. ì´í›„ ìš”ì²­ â†’ ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ì¿ í‚¤ ì „ì†¡               â”‚
â”‚  3. POST /api/v1/auth/logout â†’ ì¿ í‚¤ ì‚­ì œ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì‘ë‹µ í˜•ì‹

**ì„±ê³µ ì‘ë‹µ:**
```json
{
  "id": 1,
  "title": "ì•„ì´í…œ",
  ...
}
```

**ì—ëŸ¬ ì‘ë‹µ:**
```json
{
  "detail": "ì—ëŸ¬ ë©”ì‹œì§€"
}
```

**ê²€ì¦ ì—ëŸ¬ (422):**
```json
{
  "detail": [
    {
      "loc": ["body", "email"],
      "msg": "value is not a valid email address",
      "type": "value_error.email"
    }
  ]
}
```

---

## 1. ì¸ì¦ API (`/api/v1/auth`)

### 1.1 íšŒì›ê°€ì…

ìƒˆë¡œìš´ ì‚¬ìš©ì ê³„ì •ì„ ìƒì„±í•©ë‹ˆë‹¤.

```
POST /api/v1/auth/register
```

**Request Body:**

| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… | ì œì•½ ì¡°ê±´ |
|------|------|------|------|----------|
| `email` | string | âœ… | ì´ë©”ì¼ ì£¼ì†Œ | ìœ íš¨í•œ ì´ë©”ì¼ í˜•ì‹ |
| `username` | string | âœ… | ì‚¬ìš©ìëª… | 3-50ì, ì˜ë¬¸/ìˆ«ì/ì–¸ë”ìŠ¤ì½”ì–´ |
| `password` | string | âœ… | ë¹„ë°€ë²ˆí˜¸ | ìµœì†Œ 8ì |
| `full_name` | string | âŒ | ì „ì²´ ì´ë¦„ | ìµœëŒ€ 100ì |

**ì˜ˆì‹œ:**
```json
{
  "email": "user@example.com",
  "username": "johndoe",
  "password": "securepassword123",
  "full_name": "John Doe"
}
```

**ì„±ê³µ ì‘ë‹µ (201 Created):**
```json
{
  "id": 1,
  "email": "user@example.com",
  "username": "johndoe",
  "full_name": "John Doe",
  "is_active": true,
  "is_superuser": false,
  "created_at": "2025-01-17T12:00:00Z",
  "updated_at": null
}
```

**ì—ëŸ¬ ì‘ë‹µ:**

| ìƒíƒœ ì½”ë“œ | ì„¤ëª… | ì‘ë‹µ |
|----------|------|------|
| 409 | ì´ë©”ì¼ ì¤‘ë³µ | `{"detail": "ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤"}` |
| 409 | ì‚¬ìš©ìëª… ì¤‘ë³µ | `{"detail": "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì‚¬ìš©ìëª…ì…ë‹ˆë‹¤"}` |
| 422 | ê²€ì¦ ì‹¤íŒ¨ | Pydantic ê²€ì¦ ì—ëŸ¬ |

**curl ì˜ˆì‹œ:**

```bash
# Linux/macOS
curl -X POST http://localhost:8001/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email": "user@example.com", "username": "johndoe", "password": "password123"}'
```

```powershell
# Windows PowerShell
Invoke-RestMethod -Uri "http://localhost:8001/api/v1/auth/register" `
  -Method POST `
  -ContentType "application/json" `
  -Body '{"email": "user@example.com", "username": "johndoe", "password": "password123"}'
```

---

### 1.2 ë¡œê·¸ì¸

ì‚¬ìš©ì ì¸ì¦ í›„ JWT í† í°ì„ ë°œê¸‰í•©ë‹ˆë‹¤.

```
POST /api/v1/auth/login
```

**Request Body:**

| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| `email` | string | âœ… | ì´ë©”ì¼ ì£¼ì†Œ |
| `password` | string | âœ… | ë¹„ë°€ë²ˆí˜¸ |

**ì˜ˆì‹œ:**
```json
{
  "email": "user@example.com",
  "password": "securepassword123"
}
```

**ì„±ê³µ ì‘ë‹µ (200 OK):**
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer"
}
```

**ì‘ë‹µ í—¤ë” (ì¿ í‚¤ ì„¤ì •):**
```
Set-Cookie: access_token=eyJ...; HttpOnly; Path=/; SameSite=Lax; Max-Age=1800
```

**ì—ëŸ¬ ì‘ë‹µ:**

| ìƒíƒœ ì½”ë“œ | ì„¤ëª… | ì‘ë‹µ |
|----------|------|------|
| 401 | ì˜ëª»ëœ ìê²© ì¦ëª… | `{"detail": "ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤"}` |
| 401 | ë¹„í™œì„±í™”ëœ ê³„ì • | `{"detail": "ê³„ì •ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤"}` |

**curl ì˜ˆì‹œ:**

```bash
# ì¿ í‚¤ ì €ì¥í•˜ì—¬ ë¡œê·¸ì¸
curl -X POST http://localhost:8001/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email": "user@example.com", "password": "password123"}' \
  -c cookies.txt

# ì €ì¥ëœ ì¿ í‚¤ë¡œ ì¸ì¦ëœ ìš”ì²­
curl http://localhost:8001/api/v1/auth/me -b cookies.txt
```

---

### 1.3 ë¡œê·¸ì•„ì›ƒ

JWT í† í°ì„ ë¬´íš¨í™”í•˜ê³  ì¿ í‚¤ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.

```
POST /api/v1/auth/logout
```

**ì¸ì¦:** í•„ìš”

**ì„±ê³µ ì‘ë‹µ (200 OK):**
```json
{
  "message": "ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤"
}
```

**ì‘ë‹µ í—¤ë”:**
```
Set-Cookie: access_token=; HttpOnly; Path=/; Max-Age=0
```

---

### 1.4 í˜„ì¬ ì‚¬ìš©ì ì •ë³´

í˜„ì¬ ë¡œê·¸ì¸ëœ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

```
GET /api/v1/auth/me
```

**ì¸ì¦:** í•„ìš”

**ì„±ê³µ ì‘ë‹µ (200 OK):**
```json
{
  "id": 1,
  "email": "user@example.com",
  "username": "johndoe",
  "full_name": "John Doe",
  "is_active": true,
  "is_superuser": false,
  "created_at": "2025-01-17T12:00:00Z",
  "updated_at": "2025-01-17T14:30:00Z"
}
```

**ì—ëŸ¬ ì‘ë‹µ:**

| ìƒíƒœ ì½”ë“œ | ì„¤ëª… | ì‘ë‹µ |
|----------|------|------|
| 401 | ë¯¸ì¸ì¦ | `{"detail": "ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤"}` |
| 401 | í† í° ë§Œë£Œ | `{"detail": "í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤"}` |

---

### 1.5 ë¹„ë°€ë²ˆí˜¸ ë³€ê²½

í˜„ì¬ ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.

```
POST /api/v1/auth/change-password
```

**ì¸ì¦:** í•„ìš”

**Request Body:**

| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| `current_password` | string | âœ… | í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ |
| `new_password` | string | âœ… | ìƒˆ ë¹„ë°€ë²ˆí˜¸ (ìµœì†Œ 8ì) |

**ì˜ˆì‹œ:**
```json
{
  "current_password": "oldpassword123",
  "new_password": "newsecurepassword456"
}
```

**ì„±ê³µ ì‘ë‹µ (200 OK):**
```json
{
  "message": "ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤"
}
```

**ì—ëŸ¬ ì‘ë‹µ:**

| ìƒíƒœ ì½”ë“œ | ì„¤ëª… |
|----------|------|
| 400 | í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜ |
| 422 | ìƒˆ ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ ì‹¤íŒ¨ |

---

## 2. ì‚¬ìš©ì API (`/api/v1/users`)

### 2.1 í”„ë¡œí•„ ì¡°íšŒ

í˜„ì¬ ì‚¬ìš©ìì˜ í”„ë¡œí•„ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

```
GET /api/v1/users/me
```

**ì¸ì¦:** í•„ìš”

**ì„±ê³µ ì‘ë‹µ (200 OK):**
```json
{
  "id": 1,
  "email": "user@example.com",
  "username": "johndoe",
  "full_name": "John Doe",
  "bio": "ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œìì…ë‹ˆë‹¤",
  "avatar_url": null,
  "is_active": true,
  "created_at": "2025-01-17T12:00:00Z",
  "updated_at": "2025-01-17T14:30:00Z"
}
```

---

### 2.2 í”„ë¡œí•„ ìˆ˜ì •

í˜„ì¬ ì‚¬ìš©ìì˜ í”„ë¡œí•„ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.

```
PATCH /api/v1/users/me
```

**ì¸ì¦:** í•„ìš”

**Request Body:** (ëª¨ë“  í•„ë“œ ì„ íƒì )

| í•„ë“œ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `username` | string | ì‚¬ìš©ìëª… (3-50ì) |
| `full_name` | string | ì „ì²´ ì´ë¦„ |
| `bio` | string | ìê¸°ì†Œê°œ (ìµœëŒ€ 500ì) |

**ì˜ˆì‹œ:**
```json
{
  "full_name": "John Smith",
  "bio": "í’€ìŠ¤íƒ ê°œë°œìì…ë‹ˆë‹¤"
}
```

**ì„±ê³µ ì‘ë‹µ (200 OK):**
```json
{
  "id": 1,
  "email": "user@example.com",
  "username": "johndoe",
  "full_name": "John Smith",
  "bio": "í’€ìŠ¤íƒ ê°œë°œìì…ë‹ˆë‹¤",
  ...
}
```

---

## 3. ì•„ì´í…œ API (`/api/v1/items`)

### 3.1 ì•„ì´í…œ ëª©ë¡ ì¡°íšŒ

í˜„ì¬ ì‚¬ìš©ìì˜ ì•„ì´í…œ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

```
GET /api/v1/items
```

**ì¸ì¦:** í•„ìš”

**Query Parameters:**

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ê¸°ë³¸ê°’ | ì„¤ëª… |
|----------|------|--------|------|
| `skip` | integer | 0 | ê±´ë„ˆë›¸ ê°œìˆ˜ (offset) |
| `limit` | integer | 20 | ì¡°íšŒ ê°œìˆ˜ (ìµœëŒ€ 100) |
| `search` | string | - | ì œëª©/ì„¤ëª… ê²€ìƒ‰ì–´ |
| `is_active` | boolean | - | í™œì„± ìƒíƒœ í•„í„° |

**ì˜ˆì‹œ ìš”ì²­:**
```
GET /api/v1/items?skip=0&limit=10&search=í• ì¼&is_active=true
```

**ì„±ê³µ ì‘ë‹µ (200 OK):**
```json
{
  "items": [
    {
      "id": 1,
      "title": "í• ì¼ ì•„ì´í…œ",
      "description": "ì„¤ëª…ì…ë‹ˆë‹¤",
      "is_active": true,
      "owner_id": 1,
      "created_at": "2025-01-17T12:00:00Z",
      "updated_at": null
    },
    {
      "id": 2,
      "title": "ë‘ë²ˆì§¸ í• ì¼",
      ...
    }
  ],
  "total": 25,
  "skip": 0,
  "limit": 10
}
```

---

### 3.2 ì•„ì´í…œ ìƒì„¸ ì¡°íšŒ

íŠ¹ì • ì•„ì´í…œì˜ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

```
GET /api/v1/items/{item_id}
```

**ì¸ì¦:** í•„ìš”

**Path Parameters:**

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|----------|------|------|
| `item_id` | integer | ì•„ì´í…œ ID |

**ì„±ê³µ ì‘ë‹µ (200 OK):**
```json
{
  "id": 1,
  "title": "ì•„ì´í…œ ì œëª©",
  "description": "ìƒì„¸ ì„¤ëª…ì…ë‹ˆë‹¤",
  "is_active": true,
  "owner_id": 1,
  "created_at": "2025-01-17T12:00:00Z",
  "updated_at": "2025-01-17T14:30:00Z"
}
```

**ì—ëŸ¬ ì‘ë‹µ:**

| ìƒíƒœ ì½”ë“œ | ì„¤ëª… |
|----------|------|
| 404 | ì•„ì´í…œì„ ì°¾ì„ ìˆ˜ ì—†ìŒ |
| 403 | ì ‘ê·¼ ê¶Œí•œ ì—†ìŒ (ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ì•„ì´í…œ) |

---

### 3.3 ì•„ì´í…œ ìƒì„±

ìƒˆë¡œìš´ ì•„ì´í…œì„ ìƒì„±í•©ë‹ˆë‹¤.

```
POST /api/v1/items
```

**ì¸ì¦:** í•„ìš”

**Request Body:**

| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… | ì œì•½ ì¡°ê±´ |
|------|------|------|------|----------|
| `title` | string | âœ… | ì•„ì´í…œ ì œëª© | 1-200ì |
| `description` | string | âŒ | ì„¤ëª… | ìµœëŒ€ 5000ì |

**ì˜ˆì‹œ:**
```json
{
  "title": "ìƒˆë¡œìš´ ì•„ì´í…œ",
  "description": "ì´ê²ƒì€ ìƒˆë¡œìš´ ì•„ì´í…œì…ë‹ˆë‹¤"
}
```

**ì„±ê³µ ì‘ë‹µ (201 Created):**
```json
{
  "id": 3,
  "title": "ìƒˆë¡œìš´ ì•„ì´í…œ",
  "description": "ì´ê²ƒì€ ìƒˆë¡œìš´ ì•„ì´í…œì…ë‹ˆë‹¤",
  "is_active": true,
  "owner_id": 1,
  "created_at": "2025-01-17T15:00:00Z",
  "updated_at": null
}
```

**curl ì˜ˆì‹œ:**

```bash
curl -X POST http://localhost:8001/api/v1/items \
  -H "Content-Type: application/json" \
  -d '{"title": "ìƒˆ ì•„ì´í…œ", "description": "ì„¤ëª…"}' \
  -b cookies.txt
```

---

### 3.4 ì•„ì´í…œ ìˆ˜ì •

ê¸°ì¡´ ì•„ì´í…œì„ ìˆ˜ì •í•©ë‹ˆë‹¤.

```
PATCH /api/v1/items/{item_id}
```

**ì¸ì¦:** í•„ìš” (ì†Œìœ ìë§Œ ê°€ëŠ¥)

**Path Parameters:**

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|----------|------|------|
| `item_id` | integer | ì•„ì´í…œ ID |

**Request Body:** (ëª¨ë“  í•„ë“œ ì„ íƒì )

| í•„ë“œ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `title` | string | ì•„ì´í…œ ì œëª© |
| `description` | string | ì„¤ëª… |
| `is_active` | boolean | í™œì„± ìƒíƒœ |

**ì˜ˆì‹œ:**
```json
{
  "title": "ìˆ˜ì •ëœ ì œëª©",
  "is_active": false
}
```

**ì„±ê³µ ì‘ë‹µ (200 OK):**
```json
{
  "id": 1,
  "title": "ìˆ˜ì •ëœ ì œëª©",
  "description": "ê¸°ì¡´ ì„¤ëª…",
  "is_active": false,
  "owner_id": 1,
  "created_at": "2025-01-17T12:00:00Z",
  "updated_at": "2025-01-17T16:00:00Z"
}
```

---

### 3.5 ì•„ì´í…œ ì‚­ì œ

ì•„ì´í…œì„ ì‚­ì œí•©ë‹ˆë‹¤.

```
DELETE /api/v1/items/{item_id}
```

**ì¸ì¦:** í•„ìš” (ì†Œìœ ìë§Œ ê°€ëŠ¥)

**Path Parameters:**

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|----------|------|------|
| `item_id` | integer | ì•„ì´í…œ ID |

**ì„±ê³µ ì‘ë‹µ (200 OK):**
```json
{
  "message": "ì•„ì´í…œì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤"
}
```

**ì—ëŸ¬ ì‘ë‹µ:**

| ìƒíƒœ ì½”ë“œ | ì„¤ëª… |
|----------|------|
| 404 | ì•„ì´í…œì„ ì°¾ì„ ìˆ˜ ì—†ìŒ |
| 403 | ì‚­ì œ ê¶Œí•œ ì—†ìŒ |

---

### 3.6 ì•„ì´í…œ í™œì„± ìƒíƒœ í† ê¸€

ì•„ì´í…œì˜ í™œì„±/ë¹„í™œì„± ìƒíƒœë¥¼ í† ê¸€í•©ë‹ˆë‹¤.

```
POST /api/v1/items/{item_id}/toggle
```

**ì¸ì¦:** í•„ìš” (ì†Œìœ ìë§Œ ê°€ëŠ¥)

**ì„±ê³µ ì‘ë‹µ (200 OK):**
```json
{
  "id": 1,
  "title": "ì•„ì´í…œ",
  "is_active": false,
  ...
}
```

---

## 4. HTMX íŒŒì…œ ì—”ë“œí¬ì¸íŠ¸ (`/partials`)

íŒŒì…œ ì—”ë“œí¬ì¸íŠ¸ëŠ” HTML ì¡°ê°ì„ ë°˜í™˜í•˜ë©°, HTMXì™€ í•¨ê»˜ ì‚¬ìš©ë©ë‹ˆë‹¤.

### 4.1 ì•„ì´í…œ íŒŒì…œ

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… | ì‘ë‹µ |
|--------|-----------|------|------|
| `GET` | `/partials/items` | ì•„ì´í…œ ëª©ë¡ HTML | HTML ì¡°ê° |
| `GET` | `/partials/items/form` | ì•„ì´í…œ ìƒì„± í¼ | ëª¨ë‹¬ìš© HTML |
| `GET` | `/partials/items/{id}` | ë‹¨ì¼ ì•„ì´í…œ HTML | HTML ì¡°ê° |
| `GET` | `/partials/items/{id}/edit` | ì•„ì´í…œ ìˆ˜ì • í¼ | ëª¨ë‹¬ìš© HTML |
| `POST` | `/partials/items` | ì•„ì´í…œ ìƒì„± | HTML + HX-Trigger |
| `PUT` | `/partials/items/{id}` | ì•„ì´í…œ ìˆ˜ì • | HTML + HX-Trigger |
| `DELETE` | `/partials/items/{id}` | ì•„ì´í…œ ì‚­ì œ | ë¹ˆ HTML + HX-Trigger |

### 4.2 HX-Trigger í—¤ë”

íŒŒì…œ ì‘ë‹µì—ëŠ” í´ë¼ì´ì–¸íŠ¸ ì´ë²¤íŠ¸ë¥¼ íŠ¸ë¦¬ê±°í•˜ëŠ” í—¤ë”ê°€ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì„±ê³µ ì‹œ:**
```
HX-Trigger: {"showToast": {"type": "success", "message": "ì•„ì´í…œì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤"}, "closeModal": true}
```

**ì—ëŸ¬ ì‹œ:**
```
HX-Trigger: {"showToast": {"type": "error", "message": "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"}}
```

### 4.3 íŒŒì…œ ì‚¬ìš© ì˜ˆì‹œ

```html
<!-- ì•„ì´í…œ ëª©ë¡ ìƒˆë¡œê³ ì¹¨ -->
<button
    hx-get="/partials/items"
    hx-target="#item-list"
    hx-swap="innerHTML">
    ìƒˆë¡œê³ ì¹¨
</button>

<!-- ì•„ì´í…œ ìƒì„± ëª¨ë‹¬ -->
<button
    hx-get="/partials/items/form"
    hx-target="#modal-container"
    hx-swap="innerHTML">
    + ìƒˆ ì•„ì´í…œ
</button>

<!-- í¼ ì œì¶œ -->
<form
    hx-post="/partials/items"
    hx-target="#item-list"
    hx-swap="innerHTML">
    <input type="text" name="title" required>
    <button type="submit">ìƒì„±</button>
</form>

<!-- ì•„ì´í…œ ì‚­ì œ -->
<button
    hx-delete="/partials/items/1"
    hx-target="closest .item"
    hx-swap="outerHTML"
    hx-confirm="ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?">
    ì‚­ì œ
</button>
```

---

## 5. ì—ëŸ¬ ì‘ë‹µ ìƒì„¸

### 5.1 HTTP ìƒíƒœ ì½”ë“œ

| ì½”ë“œ | ì´ë¦„ | ì„¤ëª… |
|------|------|------|
| 200 | OK | ì„±ê³µ |
| 201 | Created | ë¦¬ì†ŒìŠ¤ ìƒì„± ì„±ê³µ |
| 400 | Bad Request | ì˜ëª»ëœ ìš”ì²­ |
| 401 | Unauthorized | ì¸ì¦ í•„ìš” |
| 403 | Forbidden | ê¶Œí•œ ì—†ìŒ |
| 404 | Not Found | ë¦¬ì†ŒìŠ¤ ì—†ìŒ |
| 409 | Conflict | ë¦¬ì†ŒìŠ¤ ì¶©ëŒ |
| 422 | Unprocessable Entity | ê²€ì¦ ì‹¤íŒ¨ |
| 500 | Internal Server Error | ì„œë²„ ì˜¤ë¥˜ |

### 5.2 ì—ëŸ¬ ì‘ë‹µ í˜•ì‹

**ì¼ë°˜ ì—ëŸ¬:**
```json
{
  "detail": "ì—ëŸ¬ ë©”ì‹œì§€"
}
```

**ê²€ì¦ ì—ëŸ¬ (422):**
```json
{
  "detail": [
    {
      "loc": ["body", "í•„ë“œëª…"],
      "msg": "ì—ëŸ¬ ë©”ì‹œì§€",
      "type": "ì—ëŸ¬ íƒ€ì…"
    }
  ]
}
```

### 5.3 ì¼ë°˜ì ì¸ ì—ëŸ¬ ì½”ë“œ

| ì—ëŸ¬ íƒ€ì… | ì„¤ëª… |
|----------|------|
| `value_error.email` | ìœ íš¨í•˜ì§€ ì•Šì€ ì´ë©”ì¼ |
| `value_error.missing` | í•„ìˆ˜ í•„ë“œ ëˆ„ë½ |
| `string_too_short` | ë¬¸ìì—´ ê¸¸ì´ ë¶€ì¡± |
| `string_too_long` | ë¬¸ìì—´ ê¸¸ì´ ì´ˆê³¼ |
| `type_error.integer` | ì •ìˆ˜ íƒ€ì… ë¶ˆì¼ì¹˜ |

---

## 6. Rate Limiting (ì†ë„ ì œí•œ)

### 6.1 ê¸°ë³¸ ì œí•œ

| ì—”ë“œí¬ì¸íŠ¸ | ì œí•œ |
|-----------|------|
| ì¸ì¦ API | 5íšŒ/ë¶„ |
| ì¼ë°˜ API | 100íšŒ/ë¶„ |
| íŒŒì…œ | 200íšŒ/ë¶„ |

### 6.2 ì œí•œ ì´ˆê³¼ ì‘ë‹µ

```
HTTP/1.1 429 Too Many Requests
Retry-After: 60

{
  "detail": "ìš”ì²­ íšŸìˆ˜ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."
}
```

---

## 7. OpenAPI ë¬¸ì„œ

ê°œë°œ ëª¨ë“œì—ì„œ ìë™ ìƒì„±ë˜ëŠ” ì¸í„°ë™í‹°ë¸Œ API ë¬¸ì„œ:

| URL | ì„¤ëª… |
|-----|------|
| `http://localhost:8001/docs` | Swagger UI - ì¸í„°ë™í‹°ë¸Œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ |
| `http://localhost:8001/redoc` | ReDoc - ë¬¸ì„œ ë³´ê¸° ìš©ì´ |
| `http://localhost:8001/openapi.json` | OpenAPI 3.0 ìŠ¤í‚¤ë§ˆ (JSON) |

### 7.1 Swagger UI ì‚¬ìš©ë²•

1. ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:8001/docs` ì ‘ì†
2. "Authorize" ë²„íŠ¼ í´ë¦­ (ë¡œê·¸ì¸ í•„ìš” ì‹œ)
3. ì—”ë“œí¬ì¸íŠ¸ í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°
4. "Try it out" ë²„íŠ¼ í´ë¦­
5. íŒŒë¼ë¯¸í„° ì…ë ¥ í›„ "Execute" í´ë¦­
6. ì‘ë‹µ í™•ì¸

### 7.2 í”„ë¡œë•ì…˜ì—ì„œ ë¬¸ì„œ ë¹„í™œì„±í™”

`.env` íŒŒì¼:
```env
DEBUG=false
```

ë˜ëŠ” `app/main.py`ì—ì„œ:
```python
app = FastAPI(
    docs_url="/docs" if settings.DEBUG else None,
    redoc_url="/redoc" if settings.DEBUG else None,
)
```

---

## 8. API ë²„ì „ ê´€ë¦¬

### 8.1 í˜„ì¬ ë²„ì „

í˜„ì¬ API ë²„ì „ì€ `v1`ì…ë‹ˆë‹¤.

```
/api/v1/auth/...
/api/v1/users/...
/api/v1/items/...
```

### 8.2 ë²„ì „ ì •ì±…

- **ë§ˆì´ë„ˆ ë³€ê²½**: ê¸°ì¡´ ë²„ì „ì— ì¶”ê°€ (í•˜ìœ„ í˜¸í™˜)
- **ë©”ì´ì € ë³€ê²½**: ìƒˆ ë²„ì „ ìƒì„± (`/api/v2/`)
- **ì§€ì› ì¤‘ë‹¨**: ìµœì†Œ 6ê°œì›” ì „ ê³µì§€

---

## 9. ë‹¤ìŒ ë‹¨ê³„

- ğŸ—ï¸ [ì•„í‚¤í…ì²˜](./08-architecture.md) - ì‹œìŠ¤í…œ êµ¬ì¡° ì´í•´
- ğŸ”§ [ê°œë°œ í™˜ê²½ ì„¤ì •](./10-development-setup.md) - ë„êµ¬ ì„¤ì •
- ğŸ§ª [í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ](./11-testing-guide.md) - í…ŒìŠ¤íŠ¸ ì‘ì„±ë²•
